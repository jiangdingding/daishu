function Combox(a,b,c,d,e,f,g){var h=this;h.divId_=a,h.options=g||{},h.option_=c,h.textDiv_=h.options.textDivId||"t"+ +(new Date),h.listDiv_=h.options.listDivId||"l"+ +(new Date),h.inputName_=b,h.currentValue_=d,h.width_=e,h.height_=f,h.div_=$("#"+a),h.disible_=null,h.nodes_=[];if(!h.div_[0])return;h.initialize()}function ClickDescription(){}function number_format(a,b,c,d){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+a)?+a:0,f=isFinite(+b)?Math.abs(b):0,g=typeof d=="undefined"?",":d,h=typeof c=="undefined"?".":c,i="",j=function(a,b){var c=Math.pow(10,b);return""+Math.round(a*c)/c};return i=(f?j(e,f):""+Math.round(e)).split("."),i[0].length>3&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,g)),(i[1]||"").length<f&&(i[1]=i[1]||"",i[1]+=(new Array(f-i[1].length+1)).join("0")),i.join(h)}Combox.prototype.initialize=function(){var a,b=this,c=b.text_=$("<div></div>").addClass("yt-text").attr("id",b.textDiv_).height(b.height_-2).css("lineHeight",b.height_-2+"px").width(b.width_).click(function(c){c.stopPropagation(),a.toggle().children().removeClass("list-div-hover"),a.find('[ivalue="'+b.currentValue_+'"]').addClass("list-div-hover")});$.each(b.option_,function(a,d){d.value==b.currentValue_&&c.html(d.text)}),c.appendTo(this.div_),a=$("<div></div>").attr("panes","layer").attr("id",b.listDiv_).addClass("yt-list").css("top",b.height_-1).css("left",0).width(b.width_+8).hide(),a.appendTo(b.div_),$.each(b.option_,function(d,e){var f=$("<div></div>").attr("ivalue",e.value).width(b.width_-12).height(25).css("lineHeight","25px").css("cursor","pointer").html(e.text).hover(function(){$(this).toggleClass("item-on-hover")}).click(function(d){a.hide(),c.html($(this).html());var e=b.currentValue_;b.inp_.val(b.currentValue_=$(this).attr("ivalue")),b.options.onchange&&e!=b.currentValue_&&b.options.onchange(b.currentValue_,e)});b.currentValue_==e.value&&f.addClass("list-div-hover"),b.options.dataTrack&&f.attr("data-track",b.options.dataTrack+"|"+e.value),f.appendTo(a),b.nodes_.push(f)});var d=b.inp_=$('<input type="hidden" name="'+this.inputName_+'"/>').attr("id","_combox_inp_"+b.divId_).val(b.currentValue_);d.appendTo(b.div_),b.options.oninit&&b.options.oninit(b.currentValue_)},Combox.prototype.setValue=function(a){var b=this;$.each(b.nodes_,function(c,d){if(d.attr("ivalue")==a){b.text_.html(d.html());var e=b.currentValue_;b.inp_.val(b.currentValue_=a),b.options.onchange&&e!=b.currentValue_&&b.options.onchange(b.currentValue_,e)}})},function(){var a=240;(function(){Validator.config.hint_left_offset=12,Validator.initForm("#cal-form1",!0),Validator.initForm("#cal-form2",!0),Validator.initForm("#cal-form3",!0),$("#calculate1").on("click",function(){Validator.validForm("#cal-form1",!0)}),$("#calculate2").on("click",function(){Validator.validForm("#cal-form2",!0)}),$("#calculate3").on("click",function(){Validator.validForm("#cal-form3",!0)}),$("#types").on("mousedown",function(){$("div.validate-hint").hide()})})();var b=[{value:60,text:"5年"},{value:120,text:"10年"},{value:180,text:"15年"},{value:240,text:"20年"},{value:300,text:"25年"},{value:360,text:"30年"}],c=[{value:.07205,text:"基准利率1.1倍 7.21%"},{value:.0655,text:"最新基准利率 6.55%"},{value:.062225,text:"基准利率9.5折 6.22%"},{value:.05895,text:"基准利率9折 5.9%"},{value:.055675,text:"基准利率8.5折 5.57%"}];new Combox("mf_dkqx","loan_term",b,a,148,28,{listDivId:"mf_dkqx_list"}),new Combox("mf_dkqx2","date",b,a,148,28,{listDivId:"mf_dkqx_list2"}),new Combox("mf_dkqx3","date",b,a,148,28,{listDivId:"mf_dkqx_list3"}),new Combox("mf_dkqx4","date",b,a,148,28,{listDivId:"mf_dkqx_list4"}),new Combox("mf_dkqx5","percent",c,.0655,148,28,{listDivId:"mf_dkqx_list5"}),new Combox("mf_dkqx6","percent2",c,.0655,148,28,{listDivId:"mf_dkqx_list6"})}();var mask={isOpen:!1,isIe6:$.browser.msie&&$.browser.version<7,zIndex:1e3,on:function(){if(mask.isOpen)return!1;mask.isOpen=!0;var a=$("#theMask");a[0]||(a=$('<div id="theMask"></div>').css({position:"absolute",top:0,left:0,width:"100%",background:"#000",opacity:.3,display:"none"}),a.appendTo($(document.body))),a.css({width:$(document).width(),height:$(document).height(),zIndex:mask.zIndex}),mask.isIe6&&$("select").hide(),a.show()},off:function(){var a=$("#theMask");if(!a[0])return!1;mask.isOpen=!1,mask.isIe6&&$("select").show(),a.hide()}};(function(a){a.centerSize=function(b){var c={width:a(window).width(),height:a(window).height()},d=a(window).scrollTop();return{top:Math.max(d+(c.height-b.height)/2,0),left:Math.max((c.width-b.width)/2,0)}},a.center=function(b){b=a(b),b.css("position","absolute").css(a.centerSize({width:b.outerWidth(),height:b.outerHeight()}))}})(jQuery);var PopLayer=function(a){a=a||{};var b=this,c=function(){return!0};b.options=$.extend({beforeOpen:c,beforeClose:c,afterClose:c,ok:c,cancel:c,iframe:!1},a),a.trigger&&(b.trigger=$(a.trigger)),a.target&&(b.target=$(a.target)),b.init()};$.extend(PopLayer.prototype,{init:function(){this._initEvent()},_initEvent:function(){var a=this,b=a.options,c,d;a.trigger&&a.trigger.click(function(b){a.open(),b.preventDefault()});if(a.target){d=b.iframe&&a.target[0].tagName.toLowerCase()=="iframe";if(d)return;function e(){c=a.target,c.find(".close, .cancel").click(function(c){b.cancel(),a.close(),c.preventDefault()}),c.find(".ok").click(function(c){b.ok(),a.close(),c.preventDefault()})}e()}},open:function(){var a=this,b=a.options;b.beforeOpen()&&a.update()},close:function(){var a=this,b=a.options;if(b.beforeClose()){mask.off(),a.target.hide();var c=a.target.get(0);c&&c.tagName&&c.tagName.toUpperCase()=="IFRAME"&&a.target.remove(),b.afterClose();try{a.loading.remove()}catch(d){}PopLayer.current=null}},update:function(){PopLayer.current=this,mask.on(),this.target.show(),$.center(this.target)}}),PopLayer.iframe=function(a){var b,c=$('<img width="48" src="/static/img/loading.gif?v=1">').css("zIndex",mask.zIndex+1),d=$('<iframe class="dialog" frameborder="0" scrolling="no"></iframe>').css({position:"absolute",left:-9999,top:-9999,zIndex:2e3,width:1,height:1}).appendTo(document.body).attr("src",a);return b=new PopLayer({target:d,iframe:!0}),b.open(),$.center(c.appendTo(document.body)),PopLayer.current.loading=c,b},PopLayer.close=function(){PopLayer.current&&PopLayer.current.close()},PopLayer.resize=function(a){PopLayer.current&&(PopLayer.current.target.animate($.extend(a,$.centerSize(a)),{duration:200}),PopLayer.current.loading.remove())};var template=function(a,b){var c=arguments.callee,d=c._cache=c._cache||{},e=c._conf=c._conf||{synxJS:{begin:"@!",end:"@"},synxTPL:{begin:"@@",end:"@"},synxVAR:{begin:"!@",end:"@"}},f=e.synxTPL.begin,g=e.synxTPL.end;c.synxBegin={each:function(a){var b=a.match(/^\s*(\S*)/)[1],c="$value";return"$.each("+b+", function($index,"+c+"){"},"if":"if ($1) {","else":"} else {"},c.synxEnd={each:"});","if":"};"};var h="var p=[];            with(obj){                p.push('"+a.replace(/[\r\t\n]/g," ").replace(new RegExp(e.synxVAR.begin+"(.+?)"+e.synxVAR.end,"g"),"',$1,'").replace(new RegExp(f+"([^\\/][^\\s"+g+"]*)(.*?)"+g,"ig"),function(a,b,d){var f=c.synxBegin[b];return e.synxJS.begin+(typeof f=="function"?f(d):f.replace("$1",d))+e.synxJS.end}).replace(new RegExp(f+"\\/(\\S*?)"+g,"ig"),function(a,b){return e.synxJS.begin+c.synxEnd[b]+e.synxJS.end}).replace(new RegExp(e.synxJS.begin+"(.+?)"+e.synxJS.end,"g"),"'); $1 p.push('")+"');        }        return p.join('');",i=d[a]=d[a]||new Function("obj",h);return b?i(b):i};(function(){var a,b,c,d,e,f=function(a){return/^[\d\.]+$/.test(a)},g=function(a){return f(a)?parseFloat(a):0},h={init:function(e,f){b=f;switch(b){case"#cal-form1":d=4;break;case"#cal-form2":d=5;break;case"#cal-form3":d=6}c=$("#cal-form"+d)[0],a=$(b)[0],this.dialog=e,this.inited||(this.addEvent(),this.inited=!0);var g=this.setValue();this._checkCheckBox(g),this.getResult(),this._checkMoney()},getValue:function(c){c=c||a;var d=c.date.value;if(b=="#cal-form3"){var f=g(c.money1.value),h=g(c.money2.value),i=g(c.percent1.value),j=g(c.percent2.value);return{money1:f,money2:h,percent1:i,percent2:j,date:d}}var k=g(c.money.value),l=g(c.percent.value);return e=k,{money:k,date:d,percent:l}},setValue:function(){var a=this.getValue();return b=="#cal-form3"?(c.money1.value=a.money1||"",c.money2.value=a.money2||"",c.percent1.value=a.percent1||.049,$("#mf_percent9").html((a.percent1||.049)*100)):(c.money.value=a.money||"",b=="#cal-form2"&&(c.percent.value=a.percent||.049,$("#mf_percent8").html((a.percent||.049)*100))),a},addEvent:function(){var a=this;$("#types2").click(function(f){var g=f.target;if(g.tagName!="A")return;var h=$(g).attr("target");$("a",$(this)).each(function(a,b){$(b).removeClass("on"),$("#"+$(b).attr("target")).hide()}),$(g).addClass("on");var i=$(g).attr("target");return $("#"+i).show(),d=i.replace("type",""),c=$("#cal-form"+d)[0],b="#cal-form"+(d-3),b!="#cal-form3"&&!c.money.value&&(c.money.value=e||""),$(".hint-div").each(function(a,c){$(c).css("display","none"),b!="#cal-form3"?$(c).css("top","320px"):$(c).css("top","406px")}),a.getResult(),f.stopPropagation(),f.preventDefault(),!1}),$("#calculate4").click(function(b){a._checkMoney()&&a.getResult(),b.stopPropagation(),b.preventDefault()}),$("#calculate5").click(function(b){a._checkMoney()&&a.getResult(),b.stopPropagation(),b.preventDefault()}),$("#calculate6").click(function(b){a._checkMoney()&&a.getResult(),b.stopPropagation(),b.preventDefault()});var f=$("#comp-result")[0],g=$("#comp-result-hint1")[0],h={left:-7,top:b!="#cal-form3"?320:406,width:330,height:140},i=["每月按相等的金额偿还贷款本息，其中每月贷款利息按月初剩余贷款本金计算并逐月结清。作为还款人，每个月还给银行固定金额，但每月还款额中的本金比重逐月递增、利息比重逐月递减。这种方式付出的利息会更多，但是早期还款压力更小。"],j=new ClickDescription(f,i.join(""),h);$(g).click(function(a){j.toggle(),a.stopPropagation(),a.preventDefault()});var k=$("#comp-result-hint2")[0],h={left:259,top:b!="#cal-form3"?320:406,width:330,height:120},i=["将本金分摊到每个月内，同时付清上一交易日至本次还款日之间的利息。这种还款方式相对等额本息而言，总的利息支出较低，但是前期支付的本金和利息较多，还款负担逐月递减。 "],l=new ClickDescription(f,i.join(""),h);$(k).click(function(a){l.toggle(),a.stopPropagation(),a.preventDefault()})},_checkCheckBox:function(a){var c=[{value:60,text:"5年"},{value:120,text:"10年"},{value:180,text:"15年"},{value:240,text:"20年"},{value:300,text:"25年"},{value:360,text:"30年"}],e=[{value:.07205,text:"基准利率1.1倍 7.21%"},{value:.0655,text:"最新基准利率 6.55%"},{value:.062225,text:"基准利率9.5折 6.22%"},{value:.05895,text:"基准利率9折 5.9%"},{value:.055675,text:"基准利率8.5折 5.57%"}];$("#mf_dkqx7").html(""),$("#mf_dkqx8").html(""),$("#mf_dkqx9").html(""),$("#mf_dkqx10").html(""),$("#mf_dkqx11").html(""),new Combox("mf_dkqx7","date",c,b=="#cal-form1"?a.date:240,113,29,{listDivId:"mf_dkqx_list7"}),new Combox("mf_dkqx8","date",c,b=="#cal-form2"?a.date:240,113,29,{listDivId:"mf_dkqx_list8"}),new Combox("mf_dkqx9","date",c,b=="#cal-form3"?a.date:240,113,29,{listDivId:"mf_dkqx_list9"}),new Combox("mf_dkqx10","percent",e,b=="#cal-form1"?a.percent:.0655,150,29,{listDivId:"mf_dkqx_list10"}),new Combox("mf_dkqx11","percent2",e,b=="#cal-form3"?a.percent2:.0655,150,29,{listDivId:"mf_dkqx_list11"}),$("#mf_dkqx_list8")[0].onmousedown=function(a){a=a||window.event;var b=a.target||a.srcElement;return b.getAttribute("ivalue")==48?($("#mf_percent8")[0].innerHTML=4,document.cal_form5.percent.value=.04):($("#mf_percent8")[0].innerHTML=4.5,document.cal_form5.percent.value=.045),!1},$("#mf_dkqx_list9")[0].onmousedown=function(a){a=a||window.event;var b=a.target||a.srcElement;return b.getAttribute("ivalue")==48?($("#mf_percent9")[0].innerHTML=4,document.cal_form6.percent1.value=.04):($("#mf_percent9")[0].innerHTML=4.5,document.cal_form6.percent1.value=.045),!1},$("a",$("#types2")).each(function(a,b){$(b).removeClass("on"),$("#"+$(b).attr("target")).hide()}),$("#choose-type"+d).addClass("on"),$("#type"+d).show()},_checkMoney:function(){if(b=="#cal-form3"){var a=$("#cal-form"+d)[0],e=a.money1,g=$(".err",e.parentNode.parentNode),h=a.money2,i=$(".err",h.parentNode.parentNode),j=!0;return f(e.value)?g.hide():(g.show(),j=!1),f(h.value)?i.hide():(i.show(),j=!1),j}var k=c.money,l=$(".err",k.parentNode.parentNode);return f(k.value)?(l.hide(),!0):(l.show(),!1)},getResult:function(){var a=this.getValue(c),d,e;if(b=="#cal-form3"){$("#comp-result").toggle(!!a.money1||!!a.money2);var f={},g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0;if(a.money1){var p=this.getCalc(a.money1,a.percent1,a.date,0);g+=p.obj.money,h+=p.obj.per,i+=p.obj.ext,j+=p.obj.total,k+=p.obj1.money,l+=p.obj1.per,m+=p.obj1.perA,n+=p.obj1.ext,o+=p.obj1.total}if(a.money2){var q=this.getCalc(a.money2,a.percent2,a.date,0);g+=q.obj.money,h+=q.obj.per,i+=q.obj.ext,j+=q.obj.total,k+=q.obj1.money,l+=q.obj1.per,m+=q.obj1.perA,n+=q.obj1.ext,o+=q.obj1.total}g=this.toNum(g,1),h=this.toNum(h,1),i=this.toNum(i,1),j=this.toNum(j,1),k=this.toNum(k,1),l=this.toNum(l,1),m=this.toNum(m,1),n=this.toNum(n,1),o=this.toNum(o,1),d={money:g,month:a.date,per:h,ext:i,total:j},e={money:k,month:a.date,per:l,perA:m,ext:n,total:o}}else $("#comp-result").toggle(!!a.money),f=this.getCalc(a.money,a.percent,a.date,1),d=f.obj,e=f.obj1;$("#comp-result-type1").html(template(this.getTpl(1),d)),$("#comp-result-type2").html(template(this.getTpl(2),e)),this.dialog.update()},getCalc:function(a,b,c,d){var e,f,g=a*1e4,h=b/12,i=c*1;return e={money:this.toNum(g,d),month:this.toNum(i,d),per:this.toNum(g*h*Math.pow(1+h,i)/(Math.pow(1+h,i)-1),d),ext:this.toNum(g*i*h*Math.pow(1+h,i)/(Math.pow(1+h,i)-1)-g,d),total:this.toNum(g*i*h*Math.pow(1+h,i)/(Math.pow(1+h,i)-1),d)},f={money:this.toNum(g,d),month:this.toNum(i,d),per:this.toNum(g*(1+i*h)/i,d),perA:this.toNum(g*h/i,d),ext:this.toNum((i+1)*g*h/2,d),total:this.toNum(g+(i+1)*g*h/2,d)},{obj:e,obj1:f}},toNum:function(a,b){return a=g(a),a?b?number_format(Math.round(a*1e3)/1e3,0,"",","):Math.round(a*1e3)/1e3:""},getTpl:function(a){var b='<table cellspacing="0" cellpadding="0" class="tb"><tr><td class="first">贷款总额</td><td>!@money@ 元</td></tr><tr><td class="first">还款月数</td><td>!@month@ 月</td></tr><tr height="46px"><td class="first">'+(a==1?"每月还款":"首月还款")+"</td>"+'<td><span class="red">!@per@</span> 元'+(a==2?'<br/><span class="fade">月递减 !@perA@ 元</span>':"")+"</td></tr>"+"<tr>"+'<td class="first">总支付利息</td>'+'<td><span class="red">!@ext@</span> 元</td>'+"</tr>"+"<tr>"+'<td class="first">还款总额</td>'+'<td><span class="red">!@total@</span> 元</td>'+"</tr>"+"</table>";return b}};return window.houseComputer=h,h})(),function(){var a=function(a){return/^[\d\.]+$/.test(a)},b={init:function(){this.inited||(this.addEvent(),this.inited=!0,this.initDialog("#calculate1","#cal-form1"),this.initDialog("#calculate2","#cal-form2"),this.initDialog("#calculate3","#cal-form3"))},initDialog:function(a,b){var c=this,d=new PopLayer({trigger:a,target:"#comp-dialog",beforeOpen:function(){return c.check_money(b)?(houseComputer.init(d,b),d.update(),!0):!1}})},check_money:function(b){var c=$(b)[0];if(b!="#cal-form3"){var d=c.money,e=$(".err",d.parentNode.parentNode);return a(d.value)?(e.hide(),!0):(e.show(),!1)}var f=c.money1,g=$(".err",f.parentNode.parentNode),h=c.money2,i=$(".err",h.parentNode.parentNode),j=!0;return a(f.value)?g.hide():(g.show(),j=!1),a(h.value)?i.hide():(i.show(),j=!1),j},addEvent:function(){var a=this,b=$("#cal-form1")[0],c=$("#cal-form2")[0],d=$("#cal-form3")[0];$(b.money).blur(function(b){a.check_money("#cal-form1")}),$(c.money).blur(function(b){a.check_money("#cal-form2")}),$(d.money1).blur(function(b){a.check_money("#cal-form3")}),$(d.money2).blur(function(b){a.check_money("#cal-form3")}),$("#types").click(function(a){var b=a.target;if(b.tagName!="A")return;$("a",$(this)).each(function(a,b){$(b).removeClass("on"),$("#"+$(b).attr("target")).hide()}),$(b).addClass("on");var c=$(b).attr("target");$("#"+c).show();var d=document.getElementById("choose-"+c).parentNode.parentNode.parentNode;c=="type3"?$.browser.msie&&$.browser.msie.version<=6?d.style.height="305px":d.style["min-height"]="305px":$.browser.msie&&$.browser.msie.version<=6?d.style.height="220px":d.style["min-height"]="220px",a.stopPropagation(),a.preventDefault()})}};return window.widgetHouse=b,b}(),$(function(){widgetHouse.init()}),function(){var a=$("#site-tip");a.on("click",".close",function(b){a.remove()})}()