function number_format(a,b,c,d){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+a)?+a:0,f=isFinite(+b)?Math.abs(b):0,g=typeof d=="undefined"?",":d,h=typeof c=="undefined"?".":c,i="",j=function(a,b){var c=Math.pow(10,b);return""+Math.round(a*c)/c};return i=(f?j(e,f):""+Math.round(e)).split("."),i[0].length>3&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,g)),(i[1]||"").length<f&&(i[1]=i[1]||"",i[1]+=(new Array(f-i[1].length+1)).join("0")),i.join(h)}var houseComputerBase={checkNumber:function(a){return/^[\d\.]+$/.test(a)},Number:function(a){return this.checkNumber(a)?parseFloat(a):0},getCalc:function(a,b,c,d){var e,f,g=a*1e4,h=b/12,i=c*1;return e={money:this.toNum(g,d),month:this.toNum(i,d),per:this.toNum(g*h*Math.pow(1+h,i)/(Math.pow(1+h,i)-1),d),ext:this.toNum(g*i*h*Math.pow(1+h,i)/(Math.pow(1+h,i)-1)-g,d),total:this.toNum(g*i*h*Math.pow(1+h,i)/(Math.pow(1+h,i)-1),d)},f={money:this.toNum(g,d),month:this.toNum(i,d),per:this.toNum(g*(1+i*h)/i,d),perA:this.toNum(g*h/i,d),ext:this.toNum((i+1)*g*h/2,d),total:this.toNum(g+(i+1)*g*h/2,d)},{obj:e,obj1:f}},toNum:function(a,b){return a=this.Number(a),a?b?number_format(Math.round(a*1e3)/1e3,0,"",","):Math.round(a*1e3)/1e3:""}};(function(){var a=[6.55,6.4,6.15,6,5.6],b=$("#sidebar"),c=b.find("input[name=loan_limit]"),d=b.find("input[name=loan_term]"),e=b.find("input[name=loan_rate]");$("#calBtn").on("click",function(b){b.preventDefault();var f=c.val()*1,g=d.val()*1,h=e.val()*1;g>5?h*=a[0]:g>3?h*=a[1]:g>1?h*=a[2]:g>.5?h*=a[3]:h*=a[4],f&&g&&h&&($result=houseComputerBase.getCalc(f,h/100,g*12,3),$("#simple_cal_result").show(),$("#month_pay").html($result.obj.per),$("#total_pay").html($result.obj.total))}),$("#agio_sel").on("click","a",function(a){var b=$(this),c=b.data("val");e.val(c),$("#agio_sel").prev().find("i").html(b.html())});var f=$("#filter-nav"),g=f.offset().top,h=$("#sidebar"),i=h.offset().top,j=$("#house_content"),k=h.height(),l=j.height(),m=l-k-2;$(window).on("scroll",function(){var a=window.opera?document.compatMode=="CSS1Compat"?$("html"):$("body"):$("html,body"),b,c;$.browser.webkit&&(a=$("body")),c=a.scrollTop(),b=c>g,k=h.height(),l=j.height(),m=l-k-2,c>i?h.css("margin-top",Math.min(c-i,m)):h.css("margin-top",0),b?($("#filter-nav-hidden").show(),f.addClass("onfloat"),$.browser.msie&&$.browser.version=="6.0"&&!$.support.style&&f.css("top",a.scrollTop())):($("#filter-nav-hidden").hide(),f.removeClass("onfloat"),$.browser.msie&&$.browser.version=="6.0"&&!$.support.style&&f.css("top",0).removeClass("onfloat"))}),$("body").on("click",".dropdown-menu a",function(a){var b=$(this).html()+"<b></b>";$(this).parent().parent().parent().find("div.filter_dropdown").html(b)}),$("#page_section a").each(function(a,b){var c=$(this).attr("href").match(/pn=(\d+)/);if(c){var d=c[1];$(b).attr("role","sync_fork").data("param","pn="+d).data("url","/fangdai/search").data("sync_filter",1).data("api","updateResult")}})})()